{% extends 'baseproject.html' %}

{% load staticfiles %}

{% block content %}
<div class="col-md-10">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <div class="col-md-8">
            <h2>Reports for {{ model.name }}</h2>
        </div>
        <form method="POST" class="row col-md-4">
            {% csrf_token %}

            <select class="col-md-9 form-control" type="text" name="generator_file" maxlength="100" required=""
                    id="id_generator_file">
                {% for g in report_generators %}
                <option value="{{ g.id }}">{{ g.generator }} - {{ g.created_at }}</option>
                {% endfor %}
            </select>

            <button type="submit" class="btn btn-outline-primary col-md-3">Generate</button>
        </form>
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <th style="width: 10%;text-align: center;">#</th>
                <th style="width: 60%;text-align: center;">Description</th>
                <th style="width: 15%;text-align: center;">Created</th>
                <th style="width: 15%;text-align: center;">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for report in report_dtos %}
            <tr>
                <td style="text-align: center;">{{ report.id }}</td>
                <td style="text-align: center;">{{ report.description }}</td>
                <td style="text-align: center;">{{ report.created_at }}</td>
                <td style="text-align: center;">
                    <a href="{% url 'reports:visualize' request.user project.slug report.id %}">
                        <button id="report" class="btn btn-sm btn-outline-secondary">View</button>
                    </a>
                    <a href="{{ report.filename }}" download>
                        <button id="download" class="btn btn-sm btn-outline-secondary">Download</button>
                    </a>
                    <a href="{% url 'reports:delete_report' request.user project.slug report.id %}">
                        <button id="delete" class="btn btn-sm btn-outline-warning">Delete</button>
                    </a>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
